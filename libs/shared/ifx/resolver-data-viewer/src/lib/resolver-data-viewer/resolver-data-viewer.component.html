<div class="row space-around-row">
  <div class="width-95 right-text">
    <mat-slide-toggle (click)="showTable = !showTable" checked="true"
      >Show Table</mat-slide-toggle
    >
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
    <button mat-flat-button [matMenuTriggerFor]="menu">
      Download <mat-icon>download</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="downloadData('json')">
        JSON <mat-icon>code</mat-icon>
      </button>
      <button mat-menu-item (click)="downloadData('csv')">
        CSV <mat-icon>border_all</mat-icon>
      </button>
    </mat-menu>
  </div>
</div>
<br />
@defer (when data()) {
  <div class="row space-around-row data-display">
    <div class="width-95">
      @if (!showTable) {
        <pre class="raw-data"
          >{{ dataAsCSV() }}
</pre
        >
      } @else {
        <lib-ifx-datatable
          [data]="dataAsDataProperty()"
          [fieldsConfig]="fields()"
        ></lib-ifx-datatable>
      }
    </div>
  </div>
} @placeholder {}
